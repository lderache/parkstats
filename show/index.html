<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Park. statistics</title>
	<link href="./assets/css/examples.css" rel="stylesheet" type="text/css">
	<script language="javascript" type="text/javascript" src="./assets/js/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="./assets/js/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="./assets/js/jquery.flot.time.js"></script>
	<script type="text/javascript">

	$(function() {

		// test data
		//var arenas = [[1167692400000, 0.20], [1196982000000, 0.31], [1205967600000, 0.27], [1220911200000, 0.24]];
		//var pmed = [[1167692400000, 0.10], [1196982000000, 0.21], [1205967600000, 0.27], [1220911200000, 0.14]];
		
		
		plotChoice = function (mode) {
		
		console.log(mode);
		var arenas = $.parseJSON(
				$.ajax(
				{
					url: "../stats/" + mode + "/arenas", 
					async: false, 
					dataType: 'json'
				}).responseText
			);
		var pmed = $.parseJSON(
				$.ajax(
				{
					url: "../stats/" + mode + "/pmed", 
					async: false, 
					dataType: 'json'
				}).responseText
			);
			
		var marshall = $.parseJSON(
				$.ajax(
				{
					url: "../stats/" + mode + "/marshall", 
					async: false, 
					dataType: 'json'
				}).responseText
			);
			
		
		// prepare data for flot
			var data = [
				{ data: marshall, label: "marshall" },
				{ data: arenas, label: "arenas" },
				{ data: pmed, label: "pmed" }
			];
			
			// prepare options
			var options = {
			canvas: false,
			xaxes: [ { mode: "time" } ]
			}
			
			// plot the data using flot
			$.plot("#placeholder", data,options);
		}
	});
	

	</script>
</head>
<body>

	<div id="header">
		<h2>Non lues CDP (%)</h2>
		<select onChange="plotChoice(this.value)">
		  <option value="unread">Non lues cdp</option>
		  <option value="cdp">Actions cdp</option>
		  <option value="perfect">Lecture parfaite</option>
		</select>
		<a href="/logout"> Logout </a>
	</div>

	<div id="content">

		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>

		<p>Ce graphique montre l'evolution du pourcentage de plaques non lues.</p>


	</div>

	<div id="footer">
		Copyright &copy; Laurent Derache pour LC System 2013
	</div>

</body>
</html>
